<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BAZIS Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #0f0f0f;
            --accent-color: #ff5722; /* –û—Ä–∞–Ω–∂–µ–≤—ã–π BAZIS */
            --card-dark: #1e1e1e;    /* –¢–µ–º–Ω—ã–π —Ñ–æ–Ω –∫–∞—Ä—Ç–æ—á–µ–∫ */
            --text-main: #ffffff;
            --text-sec: #888888;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 15px;
            padding-bottom: 100px; /* –û—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–µ –ø—Ä–∏–ª–∏–ø–∞–ª–∞ */
            -webkit-tap-highlight-color: transparent;
        }

        /* --- –®–ê–ü–ö–ê --- */
        .header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            position: sticky;
            top: 0;
            background: rgba(15, 15, 15, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 0;
            z-index: 100;
            border-bottom: 1px solid #222;
        }

        .logo-text { 
            font-size: 22px; 
            font-weight: 800; 
            color: var(--accent-color); 
            text-transform: uppercase; 
            letter-spacing: 1px;
        }

        .back-btn {
            display: none; /* –°–∫—Ä—ã—Ç–∞ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
            background: transparent;
            border: none;
            color: var(--text-main);
            font-size: 24px;
            cursor: pointer;
            padding: 0 10px;
        }

        /* --- –ë–†–ï–ù–î–´ –ò –ó–ê–ì–û–õ–û–í–ö–ò --- */
        .brand-header {
            margin: 30px 0 15px 0;
            padding-bottom: 5px;
            border-bottom: 1px solid #333;
            font-size: 18px;
            font-weight: bold;
            color: #666;
            text-transform: uppercase;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        /* –ú–∞–ª–µ–Ω—å–∫–∏–µ –ª–æ–≥–æ—Ç–∏–ø—ã –±—Ä–µ–Ω–¥–æ–≤ –ø–µ—Ä–µ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º */
        .brand-icon {
            width: 24px; height: 24px; object-fit: contain; background: #fff; border-radius: 4px; padding: 2px;
        }

        /* --- –°–ï–¢–ö–ê –ú–ï–ù–Æ (–ü–û–°–¢–ï–†–´) --- */
        .grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 10px; 
        }

        .poster-card {
            position: relative;
            height: 180px;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.2s;
            background-color: var(--card-dark);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            padding: 15px;
            border: 1px solid #333;
        }

        /* –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .poster-card.orange { background-color: var(--accent-color); border: none; }
        .poster-card.blue { background-color: #2c3e50; border: none; }
        .poster-card:active { transform: scale(0.98); }

        /* –¢–µ–∫—Å—Ç –≤–Ω—É—Ç—Ä–∏ –ø–æ—Å—Ç–µ—Ä–∞ */
        .card-content { position: relative; z-index: 2; pointer-events: none; }

        .card-title-big {
            font-size: 24px; font-weight: 700; line-height: 1; margin-bottom: 5px; color: #fff;
        }
        .card-subtitle {
            font-size: 13px; font-weight: 400; opacity: 0.8; color: #fff;
        }

        /* –ö–∞—Ä—Ç–∏–Ω–∫–∞ –≤–Ω—É—Ç—Ä–∏ –ø–æ—Å—Ç–µ—Ä–∞ */
        .card-bg-img {
            position: absolute;
            bottom: -10px; right: -20px;
            width: 130px; height: 130px;
            object-fit: contain; /* –ß—Ç–æ–±—ã —Ñ–æ—Ç–æ –Ω–µ –æ–±—Ä–µ–∑–∞–ª–æ—Å—å */
            z-index: 1;
            transform: rotate(-5deg);
        }

        /* –ö—Ä—É–≥–ª–∞—è –∫–Ω–æ–ø–∫–∞ —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π */
        .arrow-circle {
            position: absolute; bottom: 12px; right: 12px;
            width: 32px; height: 32px;
            background-color: #000; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            z-index: 3;
        }
        /* –¶–≤–µ—Ç —Å—Ç—Ä–µ–ª–∫–∏ */
        .poster-card.orange .arrow-circle svg { stroke: var(--accent-color); }
        .poster-card.blue .arrow-circle svg { stroke: #fff; }
        .poster-card .arrow-circle svg { stroke: #fff; }

        /* --- –°–ü–ò–°–û–ö –¢–û–í–ê–†–û–í (–ö–ê–¢–ê–õ–û–ì) --- */
        .product-card {
            background: var(--card-dark);
            border: 1px solid #2a2a2a;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 15px;
        }
        .prod-img {
            width: 100%; height: 240px; object-fit: cover;
            background: #000; border-radius: 8px; margin-bottom: 10px;
        }
        .prod-title { font-size: 18px; font-weight: 700; margin-bottom: 5px; line-height: 1.2; }
        .prod-price { font-size: 18px; color: var(--accent-color); font-weight: bold; margin-bottom: 10px; }
        .prod-info { font-size: 12px; color: #888; margin-bottom: 12px; }

        .add-btn {
            background: #fff; color: #000;
            border: none; padding: 12px; border-radius: 10px;
            font-weight: 700; width: 100%; cursor: pointer;
            text-transform: uppercase;
        }

        /* --- –ö–û–†–ó–ò–ù–ê –ò –§–û–†–ú–ê --- */
        .cart-item {
            background: #111; border-radius: 12px; margin-bottom: 10px;
            padding: 15px; display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #333;
        }
        .form-group { margin-bottom: 15px; }
        .form-input, .form-select {
            width: 100%; padding: 14px; background: #222;
            border: 1px solid #333; color: #fff; border-radius: 10px;
            font-size: 16px; box-sizing: border-box; -webkit-appearance: none;
        }
        .form-input:focus { border-color: var(--accent-color); outline: none; }

        /* --- –í–ò–î–ò–ú–ê–Ø –ö–ù–û–ü–ö–ê –û–¢–ü–†–ê–í–ö–ò –ó–ê–ö–ê–ó–ê --- */
        .checkout-btn-visible {
            display: none; /* –°–∫—Ä—ã—Ç–∞, –µ—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ */
            background: var(--accent-color);
            color: #fff;
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 800;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 25px;
            box-shadow: 0 4px 15px rgba(255, 87, 34, 0.3);
        }
        .checkout-btn-visible:active { opacity: 0.9; transform: scale(0.98); }

        /* --- –û–ë–©–ï–ï --- */
        .page { display: none; animation: fadeIn 0.3s ease; }
        .page.active { display: block; }

        /* –ü–ª–∞–≤–∞—é—â–∞—è –∫–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã */
        .fab-cart {
            position: fixed; bottom: 25px; right: 20px;
            background: var(--accent-color); color: white;
            width: 56px; height: 56px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 20px rgba(255, 87, 34, 0.3);
            z-index: 200; font-size: 24px;
        }
        .cart-count {
            position: absolute; top: -5px; right: -5px;
            background: white; color: var(--accent-color);
            font-size: 12px; font-weight: bold;
            width: 22px; height: 22px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <!-- –®–ê–ü–ö–ê -->
    <div class="header">
        <button id="backBtn" class="back-btn" onclick="goHome()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        </button>

        <!-- –õ–æ–≥–æ—Ç–∏–ø –ø–æ —Ü–µ–Ω—Ç—Ä—É -->
        <div class="logo-text" style="margin: 0 auto;">BAZIS</div>
            <img src="img/logo_bazis.jpeg" class="store-logo-img" alt="BAZIS">
            <div class="logo-text">BAZIS</div>
        </div>

        <!-- –ü—É—Å—Ç–æ–π –±–ª–æ–∫ –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –≤–µ—Ä—Å—Ç–∫–∏ -->
        <div style="width: 44px;"></div>
    </div>

    <!-- –≠–ö–†–ê–ù 1: –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ -->
    <div id="homePage" class="page active">

        <!-- STONE ISLAND -->
        <div class="brand-header">
            <img src="img/stone island.jpg" class="brand-icon">
            STONE ISLAND
        </div>

        <div class="grid">
            <!-- –§—É—Ç–±–æ–ª–∫–∏ -->
            <div class="poster-card" onclick="openCategory('Stone Island', 'T-Shirts')">
                <div class="card-content">
                    <div class="card-title-big">T-Shirts</div>
                    <div class="card-subtitle">Graphic & Logo</div>
                </div>
                <img src="https://image.goxip.com/u4g1y8y_s2r4s3r8x4t2r5u2u2/stone-island-white-scraping-t-shirt.jpg" class="card-bg-img">
                <div class="arrow-circle"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
            </div>

            <!-- –•—É–¥–∏ -->
            <div class="poster-card" onclick="openCategory('Stone Island', 'Hoodies')">
                 <div class="card-content">
                    <div class="card-title-big">Knits</div>
                    <div class="card-subtitle">Hoodies</div>
                </div>
                <img src="https://cdn-images.farfetch-contents.com/17/60/89/24/17608924_36852642_1000.jpg" class="card-bg-img">
                <div class="arrow-circle"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
            </div>

            <!-- –í–ò–ù–¢–ê–ñ (–®–∏—Ä–æ–∫–∏–π –æ—Ä–∞–Ω–∂–µ–≤—ã–π –±–ª–æ–∫) -->
            <div class="poster-card orange" style="grid-column: span 2;" onclick="openCategory('Stone Island', 'Vintage')">
                <div class="card-content">
                    <div class="card-title-big" style="font-size: 32px;">Archivio</div>
                    <div class="card-subtitle">Rare & Vintage Collection</div>
                </div>
                <img src="https://media.endclothing.com/media/f_auto,q_auto:eco,w_400/prodmedia/media/catalog/product/2/0/20-01-2022_SI_MEMBRANATC_LOW.jpg" class="card-bg-img" style="width: 150px;">
                <div class="arrow-circle"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
            </div>

             <!-- –í–µ—Ä—Ö–Ω—è—è –æ–¥–µ–∂–¥–∞ -->
             <div class="poster-card" onclick="openCategory('Stone Island', 'Outerwear')">
                 <div class="card-content">
                    <div class="card-title-big">Jackets</div>
                    <div class="card-subtitle">Nylon Metal</div>
                </div>
                <img src="https://www.triads.co.uk/images/products/zoom/1660305680-45336800.jpg" class="card-bg-img">
                <div class="arrow-circle"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
            </div>

            <!-- –ê–∫—Å–µ—Å—Å—É–∞—Ä—ã -->
             <div class="poster-card" onclick="openCategory('Stone Island', 'Accessories')">
                 <div class="card-content">
                    <div class="card-title-big">Access</div>
                    <div class="card-subtitle">Caps & Belts</div>
                </div>
                <img src="https://img01.ztat.net/article/spp-media-p1/d4c5322c15e34d3881b78468e2447c60/857ec713f43644938177d606073f4a4f.jpg?imwidth=1800" class="card-bg-img">
                <div class="arrow-circle"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
            </div>
        </div>

        <!-- C.P. COMPANY -->
        <div class="brand-header" style="margin-top: 40px;">
             <img src="img/c. p. company.jpg" class="brand-icon">
             C.P. COMPANY
        </div>

        <div class="grid">
             <!-- CP Company (–°–∏–Ω–∏–π —Å—Ç–∏–ª—å) -->
             <div class="poster-card blue" style="grid-column: span 2;" onclick="openCategory('CP Company', 'Outerwear')">
                 <div class="card-content">
                    <div class="card-title-big">Metropolis</div>
                    <div class="card-subtitle">Urban Protection Series</div>
                </div>
                <img src="https://cdn-images.farfetch-contents.com/19/52/47/48/19524748_43431995_1000.jpg" class="card-bg-img" style="width: 160px;">
                <div class="arrow-circle"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg></div>
            </div>
        </div>
    </div>

    <!-- –≠–ö–†–ê–ù 2: –°–ü–ò–°–û–ö –¢–û–í–ê–†–û–í -->
    <div id="productsPage" class="page">
        <h2 id="categoryTitle" style="margin-bottom: 20px; font-size: 22px;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</h2>
        <div id="productsList"></div>
    </div>

    <!-- –≠–ö–†–ê–ù 3: –ö–û–†–ó–ò–ù–ê –ò –§–û–†–ú–ê -->
    <div id="cartPage" class="page">
        <h2 style="margin-bottom: 20px;">–í–∞—à –∑–∞–∫–∞–∑</h2>

        <div id="cartItemsList"></div>

        <div style="border-top: 1px solid #333; margin: 30px 0;"></div>

        <h3 style="margin-bottom: 15px; color: var(--accent-color)">–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è</h3>
        <div class="form-group">
            <input type="text" class="form-input" id="inputName" placeholder="–ò–º—è –§–∞–º–∏–ª–∏—è (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        </div>
        <div class="form-group">
            <input type="tel" class="form-input" id="inputPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω (–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
        </div>
        <div class="form-group">
            <input type="text" class="form-input" id="inputNick" placeholder="–ù–∏–∫ –≤ Telegram (@username)">
        </div>
        <div class="form-group">
            <select class="form-select" id="inputDelivery">
                <option value="cdek">–°–î–≠–ö (–¥–æ –ø—É–Ω–∫—Ç–∞ –≤—ã–¥–∞—á–∏)</option>
                <option value="yandex">–Ø–Ω–¥–µ–∫—Å –î–æ—Å—Ç–∞–≤–∫–∞</option>
                <option value="pickup">–°–∞–º–æ–≤—ã–≤–æ–∑ (–ú–æ—Å–∫–≤–∞)</option>
            </select>
        </div>

        <!-- –í–û–¢ –ö–ù–û–ü–ö–ê, –ö–û–¢–û–†–£–Æ –¢–´ –ü–†–û–°–ò–õ -->
        <button class="checkout-btn-visible" onclick="submitOrder()">
            –û–¢–ü–†–ê–í–ò–¢–¨ –ó–ê–ö–ê–ó
        </button>
    </div>

    <!-- FAB (–ü–ª–∞–≤–∞—é—â–∞—è –∫–æ—Ä–∑–∏–Ω–∞) -->
    <div class="fab-cart" onclick="openCart()">
        üõí
        <div class="cart-count" id="cartCount">0</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // –¶–≤–µ—Ç–∞ –¥–ª—è —à–∞–ø–∫–∏
        tg.setHeaderColor('#0f0f0f'); 
        tg.setBackgroundColor('#0f0f0f');

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∫–Ω–æ–ø–∫–∏ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
        tg.MainButton.color = "#ff5722"; 
        tg.MainButton.textColor = "#ffffff";
        tg.MainButton.onClick(submitOrder); 

        // --- –ë–ê–ó–ê –î–ê–ù–ù–´–• –¢–û–í–ê–†–û–í ---
        const PRODUCTS_DB = [
            { id: 1, brand: 'Stone Island', category: 'T-Shirts', title: 'Logo Tee', price: 18500, size: 'L', color: 'Black', condition: 'New', img: 'https://image.goxip.com/u4g1y8y_s2r4s3r8x4t2r5u2u2/stone-island-white-scraping-t-shirt.jpg' },
            { id: 2, brand: 'Stone Island', category: 'Hoodies', title: 'Shadow Project', price: 45000, size: 'XL', color: 'Olive', condition: '9/10', img: 'https://cdn-images.farfetch-contents.com/17/60/89/24/17608924_36852642_1000.jpg' },
            { id: 3, brand: 'Stone Island', category: 'Vintage', title: 'Raso Gommato', price: 85000, size: 'M', color: 'Camo', condition: 'Vintage', img: 'https://media.endclothing.com/media/f_auto,q_auto:eco,w_400/prodmedia/media/catalog/product/2/0/20-01-2022_SI_MEMBRANATC_LOW.jpg' },
            { id: 4, brand: 'CP Company', category: 'Outerwear', title: 'Metropolis Jkt', price: 92000, size: '50', color: 'Grey', condition: 'New', img: 'https://cdn-images.farfetch-contents.com/19/52/47/48/19524748_43431995_1000.jpg' },
             { id: 5, brand: 'Stone Island', category: 'Outerwear', title: 'Nylon Metal', price: 65000, size: 'L', color: 'Blue', condition: 'New', img: 'https://www.triads.co.uk/images/products/zoom/1660305680-45336800.jpg' },
             { id: 6, brand: 'Stone Island', category: 'Accessories', title: 'Logo Cap', price: 14500, size: 'OS', color: 'Black', condition: 'New', img: 'https://img01.ztat.net/article/spp-media-p1/d4c5322c15e34d3881b78468e2447c60/857ec713f43644938177d606073f4a4f.jpg?imwidth=1800' }
        ];

        let cart = [];

        // –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É
        function addToCart(id) {
            const p = PRODUCTS_DB.find(x => x.id === id);
            if(p) {
                cart.push(p);
                updateCartUI();
                tg.HapticFeedback.notificationOccurred('success');
            }
        }

        // –£–¥–∞–ª–∏—Ç—å –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã
        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
            renderCartPage();
            tg.HapticFeedback.selectionChanged();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateCartUI() {
            document.getElementById('cartCount').innerText = cart.length;

            // –õ–æ–≥–∏–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–π –∫–Ω–æ–ø–∫–∏
            if (cart.length > 0) {
                const total = cart.reduce((a,b) => a + b.price, 0);
                tg.MainButton.setText(`–ó–ê–ö–ê–ó–ê–¢–¨ ‚Ä¢ ${total.toLocaleString()} ‚ÇΩ`);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–Ω–æ–ø–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –º—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ
                if (document.getElementById('cartPage').style.display === 'block') {
                   tg.MainButton.show();
                }
            } else {
                tg.MainButton.hide();
            }
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pageId).classList.add('active');

            const backBtn = document.getElementById('backBtn');
            if (pageId === 'homePage') {
                backBtn.style.display = 'none';
                tg.MainButton.hide();
            } else {
                backBtn.style.display = 'block';
            }

            if (pageId === 'cartPage') {
                updateCartUI(); // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –µ—Å–ª–∏ –∫–æ—Ä–∑–∏–Ω–∞ –Ω–µ –ø—É—Å—Ç–∞
            } else {
                tg.MainButton.hide(); // –°–∫—Ä—ã—Ç—å —Å–∏—Å—Ç–µ–º–Ω—É—é –∫–Ω–æ–ø–∫—É –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
            }

            window.scrollTo(0,0);
        }

        function goHome() { showPage('homePage'); }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function openCategory(brand, category) {
            const list = document.getElementById('productsList');
            document.getElementById('categoryTitle').innerHTML = `<span style="color:#888">${brand}</span> ${category}`;
            list.innerHTML = '';

            const items = PRODUCTS_DB.filter(p => p.brand === brand && p.category === category);

            if (items.length === 0) {
                list.innerHTML = '<div style="text-align:center; padding:40px; color:#555">–ü—É—Å—Ç–æ üå™</div>';
            }

            items.forEach(item => {
                const el = document.createElement('div');
                el.className = 'product-card';
                el.innerHTML = `
                    <img src="${item.img}" class="prod-img">
                    <div class="prod-title">${item.title}</div>
                    <div class="prod-price">${item.price.toLocaleString()} ‚ÇΩ</div>
                    <div class="prod-info">–†–∞–∑–º–µ—Ä: ${item.size} | –°–æ—Å—Ç: ${item.condition}</div>
                    <button class="add-btn" onclick="addToCart(${item.id})">–í –∫–æ—Ä–∑–∏–Ω—É</button>
                `;
                list.appendChild(el);
            });

            showPage('productsPage');
        }

        function openCart() {
            renderCartPage();
            showPage('cartPage');
        }

        // –†–µ–Ω–¥–µ—Ä –∫–æ—Ä–∑–∏–Ω—ã
        function renderCartPage() {
            const list = document.getElementById('cartItemsList');
            const btn = document.querySelector('.checkout-btn-visible');
            list.innerHTML = '';

            if (cart.length === 0) {
                list.innerHTML = '<div style="text-align:center; padding:40px; color:#555">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>';
                btn.style.display = 'none'; // –ü—Ä—è—á–µ–º –∫–Ω–æ–ø–∫—É
                return;
            }

            btn.style.display = 'block'; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É

            cart.forEach((item, index) => {
                const el = document.createElement('div');
                el.className = 'cart-item';
                el.innerHTML = `
                    <div>
                        <div style="font-weight:bold; margin-bottom:4px;">${item.title}</div>
                        <div style="font-size:12px; color:#888;">${item.size} | ${item.price.toLocaleString()} ‚ÇΩ</div>
                    </div>
                    <div style="color:#ff3b30; font-size:24px; padding:0 10px;" onclick="removeFromCart(${index})">√ó</div>
                `;
                list.appendChild(el);
            });
        }

        // --- –û–¢–ü–†–ê–í–ö–ê –ó–ê–ö–ê–ó–ê ---
        function submitOrder() {
            const name = document.getElementById('inputName').value;
            const phone = document.getElementById('inputPhone').value;
            const nick = document.getElementById('inputNick').value;
            const delivery = document.getElementById('inputDelivery').value;

            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            if (!name || !phone) {
                tg.showPopup({title: '–û—à–∏–±–∫–∞', message: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –ò–º—è –∏ –¢–µ–ª–µ—Ñ–æ–Ω'});
                return;
            }

            if (cart.length === 0) {
                 tg.showPopup({message: '–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞'});
                 return;
            }

            // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
            const orderData = {
                type: 'ORDER',
                customer: { name, phone, nick, delivery },
                items: cart,
                total: cart.reduce((sum, item) => sum + item.price, 0)
            };

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É
            tg.sendData(JSON.stringify(orderData));
        }

    </script>
</body>
</html>
